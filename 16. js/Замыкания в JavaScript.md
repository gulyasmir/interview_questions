# –ó–∞–º—ã–∫–∞–Ω–∏—è –≤ JavaScript


**–ó–∞–º—ã–∫–∞–Ω–∏–µ (closure)** ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –∏ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–µ–π –≤–Ω–µ—à–Ω–µ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏, –¥–∞–∂–µ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —ç—Ç–∞ –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

### üîπ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∑–∞–º—ã–∫–∞–Ω–∏—è?

–ö–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ–±—ä—è–≤–ª—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –≤–Ω–µ—à–Ω–µ–π —Ñ—É–Ω–∫—Ü–∏–∏. –ï—Å–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≥–¥–µ-—Ç–æ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–∑–∂–µ, –æ–Ω–∞ –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç "–ø–æ–º–Ω–∏—Ç—å" –∑–Ω–∞—á–µ–Ω–∏—è —ç—Ç–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

* –ó–∞–º—ã–∫–∞–Ω–∏–µ "–∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç" –ª–µ–∫—Å–∏—á–µ—Å–∫–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –æ–Ω–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ.
* –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å **–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**.
* –ü–æ–ª–µ–∑–Ω–æ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö —Å–æ–±—ã—Ç–∏–π, —Ç–∞–π–º–µ—Ä–∞—Ö –∏ –º–æ–¥—É–ª—è—Ö.
* –ú–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å **—É—Ç–µ—á–∫—É –ø–∞–º—è—Ç–∏**, –µ—Å–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–º—ã–∫–∞–Ω–∏–µ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è.

### –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä:

```
function outerFunction(outerVariable) {
    return function innerFunction(innerVariable) {
        console.log(`Outer: ${outerVariable}, Inner: ${innerVariable}`);
    };
}

const newFunction = outerFunction("–ó–∞–º—ã–∫–∞–Ω–∏–µ");
newFunction("—Ä–∞–±–æ—Ç–∞–µ—Ç"); 
// –í—ã–≤–µ–¥–µ—Ç: Outer: –ó–∞–º—ã–∫–∞–Ω–∏–µ, Inner: —Ä–∞–±–æ—Ç–∞–µ—Ç

```

–ó–¥–µ—Å—å `innerFunction` –∑–∞–º–∫–Ω—É–ª–∞—Å—å –Ω–∞ `outerFunction` –∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞ –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `outerVariable`.

### –†–µ–∞–ª—å–Ω—ã–π –∫–µ–π—Å: –°—á—ë—Ç—á–∏–∫

```
function createCounter() {
    let count = 0;

    return function() {
        count++;
        console.log(`Counter: ${count}`);
    };
}

const counter = createCounter();
counter(); // Counter: 1
counter(); // Counter: 2
counter(); // Counter: 3

```

–ó–¥–µ—Å—å —Ñ—É–Ω–∫—Ü–∏—è `createCounter` —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–∏–≤–∞—Ç–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `count`, –∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è –∏–º–µ–µ—Ç –∫ –Ω–µ–π –¥–æ—Å—Ç—É–ø –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ.


### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö —Å–æ–±—ã—Ç–∏–π:

```
function attachEventHandler() {
    let message = "–ö–ª–∏–∫ –±—ã–ª!";

    document.getElementById("btn").addEventListener("click", function() {
        console.log(message);
    });
}
attachEventHandler();

```


–î–∞–∂–µ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è `attachEventHandler`, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ–º–Ω–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `message` –∏ –º–æ–∂–µ—Ç –µ—ë –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.


### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –∑–∞–º—ã–∫–∞–Ω–∏—è–º–∏:

```
function User(name) {
    let _name = name; // –ü—Ä–∏–≤–∞—Ç–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è

    return {
        getName: function() {
            return _name;
        },
        setName: function(newName) {
            _name = newName;
        }
    };
}

const user = User("Alice");
console.log(user.getName()); // Alice
user.setName("Bob");
console.log(user.getName()); // Bob

```

–ó–¥–µ—Å—å `_name` –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ, –Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã `getName` –∏ `setName`.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ `setTimeout`

```
for (var i = 1; i <= 3; i++) {
    setTimeout(function() {
        console.log(i); 
    }, 1000);
}
// –í—ã–≤–µ–¥–µ—Ç: 4, 4, 4 (–∏–∑-–∑–∞ var)

```

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º `let` –∏–ª–∏ —Å–æ–∑–¥–∞—ë–º –∑–∞–º—ã–∫–∞–Ω–∏–µ:

```
for (let i = 1; i <= 3; i++) {
    setTimeout(function() {
        console.log(i);
    }, 1000);
}
// –í—ã–≤–µ–¥–µ—Ç: 1, 2, 3

```


**–ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–º—ã–∫–∞–Ω–∏–µ —Å `var`**:

```
for (var i = 1; i <= 3; i++) {
    (function(i) {
        setTimeout(function() {
            console.log(i);
        }, 1000);
    })(i);
}
// –í—ã–≤–µ–¥–µ—Ç: 1, 2, 3

```

–ò—Ç–æ–≥:

* –ó–∞–º—ã–∫–∞–Ω–∏–µ "–∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç" –ª–µ–∫—Å–∏—á–µ—Å–∫–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –æ–Ω–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ.
* –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å **–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**.
* –ü–æ–ª–µ–∑–Ω–æ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö —Å–æ–±—ã—Ç–∏–π, —Ç–∞–π–º–µ—Ä–∞—Ö –∏ –º–æ–¥—É–ª—è—Ö.
* –ú–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å **—É—Ç–µ—á–∫—É –ø–∞–º—è—Ç–∏**, –µ—Å–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–º—ã–∫–∞–Ω–∏–µ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è.
